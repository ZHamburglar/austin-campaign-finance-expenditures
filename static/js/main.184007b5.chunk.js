(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{236:function(e){e.exports={"District 1":[78653,78701,78702,78721,78722,78723,78724,78725,78752,78753,78754],"District 2":[78617,78744,78745,78747,78748],"District 3":[78702,78704,78721,78725,78741,78742,78745],"District 4":[78723,78751,78753,78758],"District 5":[78652,78704,78745,78747,78748],"District 6":[78664,78717,78726,78727,78728,78729,78730,78732,78750],"District 7":[78660,78727,78728,78753,78756,78757,78758,78759],"District 8":[78652,78735,78736,78737,78746,78748,78749],"District 9":[78701,78703,78704,78705,78722,78723,78751],"District 10":[78703,78730,78731,78746,78750,78759],Austin:[78653,78701,78702,78721,78722,78723,78724,78725,78752,78753,78754,78617,78744,78745,78747,78748,78704,78741,78742,78751,78758,78652,78664,78717,78726,78727,78728,78729,78730,78732,78750,78660,78756,78757,78759,78735,78736,78737,78746,78749,78703,78705,78731]}},368:function(e,t,a){e.exports=a(629)},627:function(e,t,a){},629:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(35),o=a(86),l=a(63),c=a(57),s=a(333),u=a(334),m=a.n(u),p=a(64),d={count:0,isIncrementing:!1,isDecrementing:!1},h={open:!1},f=function(){return function(e){e({type:"modal/CHANGE_MODAL"})}},g=Object(c.c)({counter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;switch((arguments.length>1?arguments[1]:void 0).type){case"counter/INCREMENT_REQUESTED":return Object(p.a)({},e,{isIncrementing:!0});case"counter/INCREMENT":return Object(p.a)({},e,{count:e.count+1,isIncrementing:!e.isIncrementing});case"counter/DECREMENT_REQUESTED":return Object(p.a)({},e,{isDecrementing:!0});case"counter/DECREMENT":return Object(p.a)({},e,{count:e.count-1,isDecrementing:!e.isDecrementing});default:return e}},modal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;switch((arguments.length>1?arguments[1]:void 0).type){case"modal/CHANGE_MODAL":return Object(p.a)({},e,{open:!0});default:return e}}}),v=m()({basename:"/austin-campaign-finance-expenditures/"}),E=[s.a,Object(l.routerMiddleware)(v)],b=c.d.apply(void 0,[c.a.apply(void 0,E)].concat([])),O=Object(c.e)(Object(l.connectRouter)(v)(g),{},b),C=a(23),j=a(24),y=a(26),D=a(25),_=a(27),k=a(631),w=a(335),P=a.n(w),I=a(194);I.a.initialize("UA-131186037-1");var z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=function(e){I.a.set(Object(p.a)({page:e},t)),I.a.pageview(e)};return function(t){function n(){return Object(C.a)(this,n),Object(y.a)(this,Object(D.a)(n).apply(this,arguments))}return Object(_.a)(n,t),Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.location.pathname+this.props.location.search;a(e)}},{key:"componentDidUpdate",value:function(e){var t=e.location.pathname+e.location.search,n=this.props.location.pathname+this.props.location.search;t!==n&&a(n)}},{key:"render",value:function(){return r.a.createElement(e,this.props)}}]),n}(n.Component)},S=a(163),A=a(292),M=a(311),N=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(y.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.show=function(){a.setState({open:!0})},a.close=function(){a.setState({open:!1})},a}return Object(_.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{onClick:this.show},"Blurring"),r.a.createElement(A.a,{dimmer:"blurring",open:this.state.open,onClose:this.close},r.a.createElement(A.a.Header,null,"Update Notes"),r.a.createElement(A.a.Content,{image:!0},r.a.createElement(A.a.Description,null,r.a.createElement(M.a,null,"Default Profile Image"),r.a.createElement("p",null,"We've found the following gravatar image associated with your e-mail address."),r.a.createElement("p",null,"Is it okay to use this photo?"))),r.a.createElement(A.a.Actions,null,r.a.createElement(S.a,{positive:!0,icon:"checkmark",labelPosition:"right",content:"Good to know",onClick:this.close}))))}}]),t}(n.Component),R=Object(o.connect)(function(e){return{open:e.modal.open}},function(e){return Object(c.b)({changeModal:f},e)})(N),x=function(e){function t(){return Object(C.a)(this,t),Object(y.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Work In Progress"),r.a.createElement(R,null))}}]),t}(n.Component),F=function(e){function t(){return Object(C.a)(this,t),Object(y.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Settings Page"),r.a.createElement("p",null,"Change to settings Page"))}}]),t}(n.Component),Y=a(180),T=a(346),$=a.n(T),L=function(e){function t(){return Object(C.a)(this,t),Object(y.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App-header"},r.a.createElement("div",null,"Loading",r.a.createElement($.a,{type:"cubes",color:"blue",height:100,width:200})))}}]),t}(n.Component),H=a(30),G=a.n(H),B=a(174),U=a(329),W=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(y.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,name:null,dataRange:null,reports:null,pages:null,activePage:null},a.handlePaginationChange=function(e,t){var n=t.activePage;return a.setState({activePage:n})},a}return Object(_.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.filterData()}},{key:"filterData",value:function(){var e=[],t=new Set;this.props.data.Contributions.filter(function(e){return t.add(e.report_type+" '"+G()(e.transaction_date).format("YY")),null});var a=this.props.data.Contributions.map(function(e){return G()(e.transaction_date)}),n=G.a.min(a).format("MM-DD-YYYY"),r=G.a.max(a).format("MM-DD-YYYY");e.push(n,r);var i=Array.from(t),o=Math.ceil(i.length/3);this.setState({loading:!1,dataRange:e,reports:i,pages:o,activePage:1})}},{key:"createReportsList",value:function(){var e,t=[],a=3*this.state.activePage-3;if(e=this.state.activePage===this.state.pages?this.state.reports.length:3*this.state.activePage,0===this.state.reports.length)t.push(r.a.createElement(B.a,{key:0},r.a.createElement("p",null,"None")));else for(;a<e;a++)t.push(r.a.createElement(B.a,{key:a},r.a.createElement("p",null,this.state.reports[a])));return r.a.createElement(B.a.Group,null,t)}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.name,n=e.dataRange,i=(e.reports,e.pages),o=e.activePage;return t?r.a.createElement("div",null,"Loading"):t?r.a.createElement("div",null,"Not Loading"):r.a.createElement("div",{style:{color:"black"}},r.a.createElement("div",null,"Name: ",a),r.a.createElement(B.a.Group,{raised:!0},r.a.createElement(B.a,null,r.a.createElement("p",null,"Date Range:")),r.a.createElement(B.a.Group,{horizontal:!0},r.a.createElement(B.a,null,"First: ",n[0]),r.a.createElement(B.a,null,"Last: ",n[1]))),r.a.createElement(B.a.Group,{raised:!0},r.a.createElement(B.a,null,r.a.createElement("p",null,"Reports Included:")),this.createReportsList(),r.a.createElement(U.a,{activePage:o,onPageChange:this.handlePaginationChange,firstItem:null,lastItem:null,pointing:!0,secondary:!0,totalPages:i})))}}]),t}(n.Component),J=a(189),Q=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(y.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,filteredData:null,total:null,mean:null,median:null},a}return Object(_.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.filterPie(this.props.data)}},{key:"filterPie",value:function(){var e=[0,0,0,0,0],t=0;this.props.data.Contributions.filter(function(a){return a.transaction_amount>0&&a.transaction_amount<=100?(t+=parseInt(a.transaction_amount,10),e[0]++):a.transaction_amount>100&&a.transaction_amount<=200?(t+=parseInt(a.transaction_amount,10),e[1]++):a.transaction_amount>200&&a.transaction_amount<349?(t+=parseInt(a.transaction_amount,10),e[2]++):a.transaction_amount>349&&a.transaction_amount<=350?(t+=parseInt(a.transaction_amount,10),e[3]++):a.transaction_amount>350&&(t+=parseInt(a.transaction_amount,10),e[4]++),null});var a=parseFloat(t/this.props.data.Contributions.length).toFixed(2);this.setState({loading:!1,filteredData:e,total:t,mean:a})}},{key:"render",value:function(){var e=this.state,t=e.filteredData,a=e.total,n=e.mean,i={labels:["$0-$100","$101-$200","$201-$349","$350","$350+"],datasets:[{data:t,backgroundColor:["#FF6384","#36A2EB","#FFCE56","purple","tomato"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56","purple","tomato"]}]};return r.a.createElement("div",{style:{backgroundColor:"black"}},r.a.createElement(Y.a,null,r.a.createElement(Y.a.Row,{columns:1},r.a.createElement(Y.a.Column,null,r.a.createElement("p",null,"Contribution Amount"))),r.a.createElement(Y.a.Row,{columns:2},r.a.createElement(Y.a.Column,null,r.a.createElement("p",null,"Total: $",a)),r.a.createElement(Y.a.Column,null,r.a.createElement("p",null,"Mean: $",n)))),r.a.createElement(J.a,{data:i,width:100,height:100,options:{legend:{display:!0,position:"bottom",labels:{fontColor:"red"}},tooltips:{enabled:!0}}}))}}]),t}(n.Component),q=a(236),Z=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(y.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,noData:null,filteredData:null},a}return Object(_.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.props.data.Contributions.length?this.filterPie(this.props.data):this.noDataPie(this.props.data)}},{key:"noDataPie",value:function(){this.setState({loading:!1,noData:"There isn't any data"})}},{key:"filterPie",value:function(){var e=[];this.props.data.Contributions.filter(function(t){var a;if(void 0===t.transactor_zip_code)if(t.transactor_city.length>1){var n=t.transactor_city.split(", ");a=3===n.length?n[2].slice(0,5):2===n.length?n[1].slice(0,5):"Not Categorized"}else a="Not Categorized";else a=t.transactor_zip_code.slice(0,5);if(e.some(function(e){return e.zipCode===a})){var r=e.findIndex(function(e){return e.zipCode===a});e[r].count+=1,e[r].amount=e[r].amount+parseInt(t.transaction_amount,10)}else{var i;i=t.office_sought?t.office_sought:t.office_held?t.office_held:"Austin";var o=Object.assign({});o.zipCode=a,o.count=1,o.amount=parseInt(t.transaction_amount,10),o.district=i,e.push(o)}return null}),e.sort(function(e,t){return e.amount>t.amount?-1:e.amount<t.amount?1:0}),this.setState({loading:!1,filteredData:e})}},{key:"render",value:function(){var e=this.state,t=e.filteredData,a=e.noData,n=[],i=[],o=[];if(t){var l,c;for(c=t.length<8?t.length:8,l=0;l<c;l++)"undefined"==typeof q[t[l].district]?(i.push(t[l].zipCode),o.push(t[l].amount),n.push("red")):q[t[l].district].includes(parseInt(t[l].zipCode,10))?(i.push(t[l].zipCode),o.push(t[l].amount),n.push("green")):(i.push(t[l].zipCode),o.push(t[l].amount),n.push("red"));var s={labels:i,datasets:[{data:o,backgroundColor:n,hoverBackgroundColor:n}]};return r.a.createElement("div",{style:{backgroundColor:"black"}},r.a.createElement(J.b,{data:s,width:100,height:100,options:{legend:{display:!0},tooltips:{enabled:!0}}}))}return a?r.a.createElement("div",null,"There is no data"):r.a.createElement("div",null,"Loading")}}]),t}(n.Component),K=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(y.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,filteredData:null,zipCodes:null},a}return Object(_.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.filterData(this.props.match.params.org)}},{key:"componentWillReceiveProps",value:function(e){console.log("props change??",e.selectedOrganization)}},{key:"filterData",value:function(e){var t=[];t.Contributions=[],t.Expenditures=[],this.props.data.filter(function(a){return a.filer_name===e&&"Contribution"===a.transaction_type?t.Contributions.push(a):a.filer_name===e&&"Expenditure"===a.transaction_type&&t.Expenditures.push(a),null}),this.setState({loading:!1,filteredData:t})}},{key:"createZipCodeList",value:function(e){var t=[];this.props.data.filter(function(a){var n;if(a.filer_name===e&&"Contribution"===a.transaction_type)if(n=void 0===a.transactor_zip_code?"Not Categorized":a.transactor_zip_code.slice(0,5),t.some(function(e){return e.zipCode===n})){var r=t.findIndex(function(e){return e.zipCode===n});t[r].count+=1,t[r].amount=t[r].amount+parseInt(a.transaction_amount,10)}else{var i=Object.assign({});i.zipCode=n,i.count=1,i.amount=parseInt(a.transaction_amount,10),t.push(i)}return null}),this.setState({loading:!1,zipCodes:t})}},{key:"render",value:function(){return this.state.loading?r.a.createElement("div",{className:"App"},r.a.createElement(L,null)):this.state.filteredData?r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{columns:3,stackable:!0},r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Column,null,r.a.createElement(W,{data:this.state.filteredData})),r.a.createElement(Y.a.Column,null,r.a.createElement(Q,{data:this.state.filteredData})),r.a.createElement(Y.a.Column,null,r.a.createElement(Q,{data:this.state.filteredData}))),r.a.createElement(Y.a.Row,null,r.a.createElement(Y.a.Column,null,r.a.createElement(Z,{data:this.state.filteredData})),r.a.createElement(Y.a.Column,null,r.a.createElement(Z,{data:this.state.filteredData})),r.a.createElement(Y.a.Column,null,r.a.createElement(Z,{data:this.state.filteredData}))))):r.a.createElement(r.a.Fragment,null,"Something has gone wrong.")}}]),t}(n.Component),V=a(185),X=a(177),ee=a(319),te=a(349),ae=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(y.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,searchinput:"",selectedOrganization:"",datesRange:""},a.handleSearchChange=function(e){a.setState({searchinput:e.target.value})},a.handleOrgChange=function(e,t){a.props.changeOrgPage(t.value)},a.handleChange=function(e,t){var n=t.name,r=t.value;a.state.hasOwnProperty(n)&&a.setState(Object(V.a)({},n,r))},a.submitSearch=function(e){var t=a.getName(a.state.data,"expenditure_type",a.state.searchinput);a.setState({filteredData:t}),e.preventDefault()},a}return Object(_.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(X.a,{fixed:"top",borderless:!0,inverted:!0,className:"Navbar"},r.a.createElement(X.a.Item,{as:"a",header:!0},"Austin Political Tracker"),r.a.createElement(X.a.Item,{as:"a",onClick:this.props.changeHomePage},"Home"),r.a.createElement(ee.a,{item:!0,simple:!0,text:"Council/PACS"},r.a.createElement(ee.a.Menu,null,r.a.createElement(ee.a.Item,null,r.a.createElement("i",{className:"dropdown icon"}),r.a.createElement("span",{className:"text"},"Office Holders"),r.a.createElement(ee.a.Menu,null,this.props.organizations.Council.map(function(t){return r.a.createElement(ee.a.Item,{onClick:e.handleOrgChange,key:t.filer_name,value:t.filer_name},t.filer_name)}))),r.a.createElement(ee.a.Item,null,r.a.createElement("i",{className:"dropdown icon"}),r.a.createElement("span",{className:"text"},"PACS"),r.a.createElement(ee.a.Menu,null,this.props.organizations.Organizations.map(function(t){return r.a.createElement(ee.a.Item,{onClick:e.handleOrgChange,key:t.filer_name,value:t.filer_name},t.filer_name)}))))),r.a.createElement(X.a.Item,null,r.a.createElement(te.DatesRangeInput,{name:"datesRange",placeholder:"From - To",dateFormat:"MM-DD-YYYY",minDate:"01-10-2016",value:this.state.datesRange,iconPosition:"left",onChange:this.handleChange})),r.a.createElement(X.a.Item,{as:"a",position:"right",onClick:this.props.changeSettingPage},"Settings")))}}]),t}(n.Component),ne=Object(o.connect)(null,function(e){return Object(c.b)({changeHomePage:function(){return Object(l.push)("/")},changeSettingPage:function(){return Object(l.push)("/settings")},changeOrgPage:function(e){return Object(l.push)("/council/"+e,{hello:"state value"})}},e)})(ae),re=a(238),ie=a(239);function oe(){var e=Object(re.a)(["\n    background-color: rgba(66,87,102, .6);\n\theight: 95%;\n    width: 95%;\n\tpadding: 10px;\n"]);return oe=function(){return e},e}function le(){var e=Object(re.a)(["\n\tposition: absolute;\n\tmargin-top: 5vh;\n\twidth: 100%;\n    height: 95%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    font-size: calc(10px + 2vmin);\n    color: white;\n"]);return le=function(){return e},e}var ce=ie.a.div(le()),se=ie.a.div(oe()),ue=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(y.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,data:null,organizations:null},a}return Object(_.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=this;P.a.get("https://data.austintexas.gov/resource/asyh-u6ja.json?$limit=7000").then(function(t){var a=[],n=[];n.Council=[],n.Organizations=[],t.data.filter(function(e){return a.findIndex(function(t){return t.filer_name===e.filer_name})<=-1&&a.push({filer_name:e.filer_name,form:e.form}),null}),a.sort(function(e,t){return e.filer_name<t.filer_name?-1:e.filer_name>t.filer_name?1:0}),a.filter(function(e){return"C/OH - Candidate/Officeholder Campaign Finance Report"===e.form?n.Council.push(e):n.Organizations.push(e),null}),e.setState({loading:!1,data:t.data,organizations:n})}).catch(function(e){console.error(e)})}},{key:"render",value:function(){var e=this;return this.state.loading?r.a.createElement("div",null,r.a.createElement(L,null)):this.state.data?r.a.createElement(r.a.Fragment,null,r.a.createElement(ne,{organizations:this.state.organizations}),r.a.createElement(ce,null,r.a.createElement(se,null,r.a.createElement(k.a,{exact:!0,path:"/",component:z(x)}),r.a.createElement(k.a,{exact:!0,path:"/council/:org",component:z(function(t){return r.a.createElement(K,Object.assign({},t,{data:e.state.data}))})}),r.a.createElement(k.a,{exact:!0,path:"/settings",component:z(F)})))):r.a.createElement("div",null,"This is Broken")}}]),t}(n.Component),me=(a(625),a(627),document.querySelector("#root"));Object(i.render)(r.a.createElement(o.Provider,{store:O},r.a.createElement(l.ConnectedRouter,{history:v},r.a.createElement("div",{className:"App"},r.a.createElement(ue,null)))),me)}},[[368,2,1]]]);
//# sourceMappingURL=main.184007b5.chunk.js.map